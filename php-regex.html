<!DOCTYPE html>
<html lang>
  <head><meta name="generator" content="Hexo 3.8.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="description" content="PHP中的正则表达式应用">




  <meta name="keywords" content="PHP编程,">





  <link rel="alternate" href="/default" title="Rming">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.2">



<link rel="canonical" href="http://rmingwang.com/php-regex.html">


<meta name="description" content="教程看了千千万,最后不动手都是白搭,结合实例看一下,多多实践才能真正学会. 最简单的匹配12^d&amp;#123;5,&amp;#125;$#QQ号码为数字且至少5位  ^：表示匹配字符串的开始，也即该字符串是独立的开始而不是包含在某个字符串之内 d：表示匹配数字 {5,}：表示至少匹配5位及以上 $：表示匹配字符串的结束，也即该字符串是独立的结束  从该例子可以看出，正则表达式是从左至右描述的.在来个类似的例">
<meta name="keywords" content="PHP编程">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP中的正则表达式应用">
<meta property="og:url" content="http://rmingwang.com/php-regex.html">
<meta property="og:site_name" content="Rming">
<meta property="og:description" content="教程看了千千万,最后不动手都是白搭,结合实例看一下,多多实践才能真正学会. 最简单的匹配12^d&amp;#123;5,&amp;#125;$#QQ号码为数字且至少5位  ^：表示匹配字符串的开始，也即该字符串是独立的开始而不是包含在某个字符串之内 d：表示匹配数字 {5,}：表示至少匹配5位及以上 $：表示匹配字符串的结束，也即该字符串是独立的结束  从该例子可以看出，正则表达式是从左至右描述的.在来个类似的例">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2014-11-19T07:04:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PHP中的正则表达式应用">
<meta name="twitter:description" content="教程看了千千万,最后不动手都是白搭,结合实例看一下,多多实践才能真正学会. 最简单的匹配12^d&amp;#123;5,&amp;#125;$#QQ号码为数字且至少5位  ^：表示匹配字符串的开始，也即该字符串是独立的开始而不是包含在某个字符串之内 d：表示匹配数字 {5,}：表示至少匹配5位及以上 $：表示匹配字符串的结束，也即该字符串是独立的结束  从该例子可以看出，正则表达式是从左至右描述的.在来个类似的例">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.2">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?26275cbf6baa00fb8df9ba266da07c6d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-22663233-12', 'auto');
        ga('send', 'pageview');
  </script>





  


    <title> PHP中的正则表达式应用 - Rming </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">Rming</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/links.html">
                            
                            
                                友情链接
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          PHP中的正则表达式应用
        
      </h1>

      <time class="post-time">
          11月 14 2014
      </time>
    </header>



    
            <div class="post-content">
            <p>教程看了千千万,最后不动手都是白搭,结合实例看一下,多多实践才能真正学会.</p>
<h3><span id="最简单的匹配">最简单的匹配</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^d&#123;5,&#125;$</span><br><span class="line">#QQ号码为数字且至少5位</span><br></pre></td></tr></table></figure>
<ul>
<li><code>^</code>：表示匹配字符串的开始，也即该字符串是独立的开始而不是包含在某个字符串之内</li>
<li><code>d</code>：表示匹配数字</li>
<li><code>{5,}</code>：表示至少匹配5位及以上</li>
<li><code>$</code>：表示匹配字符串的结束，也即该字符串是独立的结束</li>
</ul>
<p>从该例子可以看出，正则表达式是从左至右描述的.<br>在来个类似的例子:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^1d&#123;10&#125;$</span><br><span class="line">#1开头的11位(独立)数字,可以简单认为是手机号码</span><br></pre></td></tr></table></figure>
<h3><span id="元字符">元字符</span></h3><p>在上面的例子中，<code>^</code> 、<code>d</code> 及 <code>$</code> 等这些符号，代表了特定的匹配意义，我们称之为元字符，常用的元字符如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center">元字符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>.</code></td>
<td>匹配除换行符意外的任意字符</td>
</tr>
<tr>
<td style="text-align:center"><code>w</code></td>
<td>匹配字母或数字或下划线</td>
</tr>
<tr>
<td style="text-align:center"><code>s</code></td>
<td>匹配任意的空白符</td>
</tr>
<tr>
<td style="text-align:center"><code>d</code></td>
<td>匹配数字</td>
</tr>
<tr>
<td style="text-align:center"><code></code></td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td style="text-align:center"><code>^</code></td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td style="text-align:center"><code>$</code></td>
<td>匹配字符串的结束</td>
</tr>
<tr>
<td style="text-align:center"><code>[x]</code></td>
<td>匹配x字符，如匹配字符串中的 a、b 和 c 字符</td>
</tr>
<tr>
<td style="text-align:center"><code>W</code></td>
<td>w的反义，即匹配任意非字母，数字，下划线和汉字的字符</td>
</tr>
<tr>
<td style="text-align:center"><code>S</code></td>
<td>s的反义，即匹配任意非空白符的字符</td>
</tr>
<tr>
<td style="text-align:center"><code>D</code></td>
<td>d的反义，即匹配任意非数字的字符</td>
</tr>
<tr>
<td style="text-align:center"><code>B</code></td>
<td>的反义，即不是单词开头或结束的位置</td>
</tr>
<tr>
<td style="text-align:center"><code>[^x]</code></td>
<td>匹配除了 x 意外的任意字符，如 [^abc] 匹配除了 abc 这几个字母之外的任意字符</td>
</tr>
</tbody>
</table>
<h3><span id="提示">提示</span></h3><ul>
<li>当我们要匹配这些元字符的时候，我们需要用到字符转义功能，同样正则表达式里面用  来表示转义，如要匹配 . 符号，则需要用 <code>.</code> ，否则 <code>.</code> 会被解释成“除换行符外的任意字符”。当然，要匹配 <code></code> ，则需要写成 <code>\</code></li>
<li>连续的数字或字母可以用 <code>–</code> 符号连接起来，如 匹配所有的小写字母，<code>[1-5]</code> 匹配 1 至 5 这 5 个数字</li>
</ul>
<h3><span id="重复">重复</span></h3><p>正则表达式的威力在于其能够在模式中包含选择和循环，正则表达式用一些重复规则来表达循环匹配。</p>
<h3><span id="常用重复">常用重复</span></h3><table>
<thead>
<tr>
<th style="text-align:center">重复</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>*</code></td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td style="text-align:center"><code>+</code></td>
<td>重复 1 次或更多次</td>
</tr>
<tr>
<td style="text-align:center"><code>?</code></td>
<td>重复零次或 1 次</td>
</tr>
<tr>
<td style="text-align:center"><code>{n}</code></td>
<td>重复 n 次</td>
</tr>
<tr>
<td style="text-align:center"><code>{n,}</code></td>
<td>重复 n 次或更多次</td>
</tr>
<tr>
<td style="text-align:center"><code>{n,m}</code></td>
<td>重复 n 到 m 次</td>
</tr>
</tbody>
</table>
<h3><span id="分枝">分枝</span></h3><p>&emsp;&emsp;分枝是指制定几个规则，如果满足任意一种规则，则都当作匹配成功。具体来说就是用 | 符号把各种规则分开，且条件从左至右匹配。</p>
<p><strong>提示</strong><br>&emsp;&emsp;由于分枝规定，只要匹配成功，就不再对后面的条件加以匹配，所以如果你想匹配有包含关系的内容，请注意规则的顺序。<br>美国的邮政编码的规则是 5 个数字或者 5 个数字连上 4 个数字，如 12345 或者 54321-1234 ，如果要匹配所有的邮编，则正确的正则表达式为：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\d&#123;5&#125;-\d&#123;4&#125;|\d&#123;5&#125;</span><br><span class="line">//错误写法</span><br><span class="line">\d&#123;5&#125;|\d&#123;5&#125;-\d&#123;4&#125;</span><br></pre></td></tr></table></figure>
<p>下面的错误写法，只能匹配到 5 位数字及 9 位数字的前 5 位数字的情况，而不能匹配 9 位数字的邮编。 </p>
<h3><span id="分组">分组</span></h3><p>&emsp;&emsp;在正则表达式中，可以用小括号将一些规则括起来当作分组，分组可以作为一个元字符来看待。<br><strong>验证 IP 地址：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(\d&#123;1,3&#125;\.)&#123;3&#125;\d&#123;1,3&#125;</span><br></pre></td></tr></table></figure>
<p>这是一个简单的且不完善的匹配 IP 地址的正则表达式，因为它除了能匹配正确的 IP 地址外，还能匹配如 322.197.578.888 这种不存在的 IP 地址。<br>当然，用这个表达式简单匹配成功后可以在利用 PHP 的算术比较再加以判断 IP 地址是否正确。而正则表达式中没有提供算术比较功能，如果要完全匹配正确的 IP 地址，则需要改进如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((25[0-5]|2[0-4]\d|[01]?\d\d?)\.)&#123;3&#125;(25[0-5]|2[0-4]\d|[01]?\d\d?)</span><br></pre></td></tr></table></figure>
<p><strong>规则说明</strong><br>该规则关键之处在于确定 IP 地址每一段范围为 0-255 ，然后再重复 4 次即可。在：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">25[0-5]|2[0-4]\d|[01]?\d\d?</span><br></pre></td></tr></table></figure>
<p>中，用分枝首先确定了 250-255 和 200-249 。 [01]?\d\d? 则确定了 0-199 的范围，综合起来就是 0-255 </p>
<h3><span id="贪婪与懒惰">贪婪与懒惰</span></h3><p>&emsp;&emsp;正则表达式默认的情况下，会在满足匹配条件下尽可能的匹配更多内容。如 a.*b，用他来匹配 aabab ，它会匹配整个 aabab ，而不会只匹配到 aab 为止，这就是贪婪匹配。<br>&emsp;&emsp;与贪婪匹配对应的是，在满足匹配条件的情况下尽可能的匹配更少的内容，这就是懒惰匹配。<br>上述例子对应的懒惰匹配规则为：  </p>
<pre><code>a.*?b
</code></pre><p>如果用该表达式去匹配 aabab ，那么就会得到 aab 和 ab 这样两个匹配结果。</p>
<p><strong>常用的懒惰限定符如下：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">懒惰限定符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>*?</code></td>
<td>重复任意次，但尽可能少重复</td>
</tr>
<tr>
<td style="text-align:center"><code>+?</code></td>
<td>重复 1 次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td style="text-align:center"><code>??</code></td>
<td>重复 0 次或 1 次，但尽可能少重复</td>
</tr>
<tr>
<td style="text-align:center"><code>{n,}</code></td>
<td>重复 n 次以上，但尽可能少重复</td>
</tr>
<tr>
<td style="text-align:center"><code>{n,m}</code></td>
<td>重复 n 到 m 次，但尽可能少重复</td>
</tr>
</tbody>
</table>
<h3><span id="模式修正符">模式修正符</span></h3><p>&emsp;&emsp;模式修正符是标记在整个正则表达式之外的，可以看着是对正则表达式的一些补充说明。<br><strong>常用的模式修正符:</strong>  </p>
<table>
<thead>
<tr>
<th style="text-align:center">模式修正符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>i</code></td>
<td>模式中的字符将同时匹配大小写字母</td>
</tr>
<tr>
<td style="text-align:center"><code>m</code></td>
<td>字符串视为多行</td>
</tr>
<tr>
<td style="text-align:center"><code>s</code></td>
<td>将字符串视为单行，换行符作为普通字符</td>
</tr>
<tr>
<td style="text-align:center"><code>x</code></td>
<td>将模式中的空白忽略</td>
</tr>
<tr>
<td style="text-align:center"><code>e</code></td>
<td>preg_replace() 函数在替换字符串中对逆向引用作正常的替换，将其作为 PHP 代码求值，并用其结果来替换所搜索的字符串。</td>
</tr>
<tr>
<td style="text-align:center"><code>A</code></td>
<td>强制仅从目标字符串的开头开始匹配</td>
</tr>
<tr>
<td style="text-align:center"><code>D</code></td>
<td>模式中的 $ 元字符仅匹配目标字符串的结尾</td>
</tr>
<tr>
<td style="text-align:center"><code>U</code></td>
<td>匹配最近的字符串</td>
</tr>
<tr>
<td style="text-align:center"><code>u</code></td>
<td>模式字符串被当成 UTF-8</td>
</tr>
</tbody>
</table>

            </div>
          

    
      <footer class="post-footer">
        <div class="post-tags">
          
            <a href="/tags/PHP编程/">PHP编程</a>
          
        </div>

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/php-version-management-phpenv.html">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">PHP的多版本环境管理</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/python-tuple-list-dict-set.html">
        <span class="next-text nav-default">Python元祖，列表，字典，集合的比较</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
    <div style="text-align:center;">
        <button class="btn" id="load-disqus" onclick="disqus.load();">加载 Disqus 评论</button>
    </div>
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2008 -
    
    2019
    <span class="footer-author">Rming.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a> and <a class="theme-link" href="https://github.com/Rming/hexo-theme-polarbearsimple">Polar Bear Simple</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    

<script type="text/javascript">
  var disqus_shortname = 'rming';
  var disqus_identifier = '/php-regex.html';

  var disqus_title = "PHP中的正则表达式应用";


  var disqus = {
    load : function disqus(){
        if(typeof DISQUS !== 'object') {
          (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
          }());
          $('#load-disqus').remove(); ///加载后移除按钮
        }
    }
  }

  
    var disqus_config = function () {
        this.page.url = disqus_url;
        this.page.identifier = disqus_identifier;
        this.page.title = disqus_title;
    };
  

</script>


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.2"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.2"></script>

  </body>
</html>
